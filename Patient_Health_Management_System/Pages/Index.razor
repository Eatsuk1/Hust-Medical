@page "/"
@using Microsoft.AspNetCore.Components.Server.ProtectedBrowserStorage
@inject ProtectedLocalStorage ProtectedLocalStorage
@inject IAccountService AccountService

@code{


    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            var value = await ProtectedLocalStorage.GetAsync<string>("access_token");
            if (String.IsNullOrEmpty(value.Value))
            {
                var access_token = await AccountService.TokenGenerator();
                await ProtectedLocalStorage.SetAsync("access_token", access_token);
            }
            StateHasChanged();
        }
    }

    
}

